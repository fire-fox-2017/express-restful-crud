<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head>
  <body>
    <h1><%= title %></h1>
    <p>Welcome to <%= title %></p>


		<form action="/users/createUser" method="post">
			Name: <input type="text" name="user_name"><br>
			email: <input type="text" name="user_email"><br>
			Memo: <input type="text" name="user_memo"><br>
	    <input type="submit" value="OK">

		</form>


		<form action="/addMemo" method="post">
			User ID: <input type="text" name="user_id"><br>
<!-- 			email: <input type="text" name="user_email"><br>			
 --> 
 			Memo: <input type="text" name="user_memo"><br>
	    <input type="submit" value="OK">

		</form>



		<table>
			<thead>
        <tr>
	        <th>No</th>
	        <th>title</th>
	        <th>status</th>
	        <th>user email</th>
	        <th>created at</th>
        </tr>
			</thead>
			<tbody>
				<% 
					if(memos.length < 1) { 
				%> 
					<tr>
						<td><p>No Data :( </p></td>
					</tr>

				<% 
					} else {
						for (let i = 0 ; i < memos.length ; i++) {
				%>
							<tr>
								<td><%= i %></td>
								<td><%= memos[i].title %></td>
								<% let complete_str = memos[i].is_complete? 'x' : 'o' %>
								<td><%= complete_str %></td>
								<%
									memos[i].getUser()
									.then (user => {
										console.log(user.email);
								%>

								
										<td><%= user.email %></td>
								<%
									})
								%>
								<td><%= memos[i].created_at %></td>

							</tr>
				<%		
						}
					}

				%>
			</tbody>
		</table>




  </body>
</html>
